---
sidebar_position: 90
---

# 操作ログの種類と詳細

サービス利用状況で確認できる操作ログの種類と、その詳細を説明します。

ユーザーに付与された権限によって操作ログを扱える範囲が異なります。  
組織管理者はすべての操作ログを扱うことが可能なのに対して、一般ユーザーは自分自身の操作ログの一部のみ確認することができます。

## サービス利用状況の確認

### [PCA ID 管理コンソール](./ユーザーのサービス利用状況を確認する.md)

- 組織に所属するすべてのユーザーを対象とします。
- 操作ログ CSV ファイルは、すべてのデータ種類を対象として、直近の2年間を出力します。
- 操作ログ画面は、認証とセキュリティ関連のログを対象として、直近の7日間を表示します。

### [PCA ID アカウント設定](../../一般ユーザー向け/自身のサービス利用状況を確認する.md)

- 自分自身のみを対象とします。
- 操作ログ CSV ファイルは、出力できません。
- 操作ログ画面は、認証とセキュリティ関連のログを対象として、直近の7日間を表示します。

## 操作ログ CSV ファイル仕様

- データ形式：CSV（カンマ区切り）
- ファイル拡張子：.csv
- 文字エンコーディング：UTF-8 (BOM付き)
- 改行文字：CRLF または LF
- 行フォーマット
  - １行目：ヘッダー行
    - 項目一覧は固定となります。
    - バージョン管理はしません。
  - ２行目以降：データ行
    - 文字列データはダブルクォーテーション（"）で囲います。

### データ項目

| No. | 項目名 | 説明と例 |
| --: | --- | --- |
| 1 | ログ種類 | ![重要](./images/important.png) 重要 → **重要な操作**が正常に完了したとき <br/> ![情報](./images/information.png) 情報 → 操作が正常に完了したとき <br/> ![警告](./images/exclamation.png) 警告 → 操作が正常に失敗したとき <br/> ![エラー](./images/error.png) エラー → 操作が意図せず失敗したとき  |
| 2 | 日時 | `yyyy/mm/dd hh:mm:ss` <br/> 日本時間（JST）です。 |
| 3 | アプリケーション名 | 利用サービスです。 <br/> PCA Hub, PCA ID アカウント設定など |
| 4 | IPアドレス | IPv4（例：12.34.56.78）を対象とします。 |
| 5 | 組織ID | 組織の内部IDで、調査目的で使用します。 |
| 6 | 組織名 | 組織の判別に使用します。<br/>（例）iidabashi-company |
| 7 | アカウントID | 実行ユーザーのPCAアカウントの内部IDで、調査目的で使用します。 |
| 8 | ユーザー名 | 実行ユーザーのユーザー名（表示名）です。<br/>（例）飯田橋 一郎 |
| 9 | ログイン名 | 実行ユーザーのログイン名です。<br/>（例）ichiro |
| 10 | データ種類 | 対象データの種類です。<br/> （例）組織、ユーザー、認証 |
| 11 | 操作 | 操作の種類です。<br/> （例）作成、更新、ログイン、パスワードの変更など |
| 12 | 内容 | 対象データと操作内容です。<br/> （例）ユーザー[ichiro]を作成 |
| 13 | 詳細 | 操作内容の詳細（JSONデータ等）で、調査目的で使用します。 |
| 14 | トレースID | 個々の操作を判別するIDで、調査目的で使用します。 |
| 15 | エラー情報 | エラーコードやメッセージの文字列で、調査目的で使用します。 |

## 操作ログの種類

### 組織操作

- データ種類は 「`組織`」 固定となります。
- 組織管理者のみ参照可能です。
- CSV出力 ![CSV](./images/CSVファイル.png) はすべての操作が対象ですが、画面表示 ![画面](./images/画面表示.png) は対象外となります。
- 操作が意図せず失敗した場合、ログ種類が「![エラー](./images/error.png) エラー」となります。

| 管理者 | ログ種類 | 操作 | 内容 |
| :---: | :---: | --- | --- |
| ![CSV](./images/CSVファイル.png) | ![重要](./images/important.png) 重要 | 作成 | 組織[組織名]を作成 |
| ![CSV](./images/CSVファイル.png) | ![情報](./images/information.png) 情報 | 更新 | 組織[組織名]を更新 |
| ![CSV](./images/CSVファイル.png) | ![情報](./images/information.png) 情報 | 画像の更新 | 組織[組織名]の画像を更新 |
| ![CSV](./images/CSVファイル.png) | ![重要](./images/important.png) 重要 | 組織名の変更 | 組織[組織名]の組織名を変更 |
| ![CSV](./images/CSVファイル.png) | ![重要](./images/important.png) 重要 | サービス区画の追加 | 組織[組織名]にサービス区画を追加 |
| ![CSV](./images/CSVファイル.png) | ![重要](./images/important.png) 重要 | サービス区画の削除 | 組織[組織名]からサービス区画を削除 |
| ![CSV](./images/CSVファイル.png) | ![重要](./images/important.png) 重要 | 組織統合リクエストの送信 <br/> ※統合元組織 | 組織[統合元組織名]から <br/> 組織[統合先組織名]への統合リクエストを送信 |
| ![CSV](./images/CSVファイル.png) | ![情報](./images/information.png) 情報 | 組織統合リクエストの取消 <br/> ※統合元組織 | 組織[統合元組織名]から <br/> 組織[統合先組織名]への統合リクエストを取り消し |
| ![CSV](./images/CSVファイル.png) | ![重要](./images/important.png) 重要 | 組織統合リクエストの確認 <br/> ※統合元組織 | 組織[統合元組織名]から <br/> 組織[統合先組織名]への統合リクエストを確認 |
| ![CSV](./images/CSVファイル.png) | ![重要](./images/important.png) 重要 | 組織統合リクエストの承諾 <br/> ※統合先組織 | 組織[統合元組織名]から <br/> 組織[統合先組織名]への統合リクエストを承諾 |
| ![CSV](./images/CSVファイル.png) | ![重要](./images/important.png) 重要 | 組織統合リクエストの却下 <br/> ※統合先組織 | 組織[統合元組織名]から <br/> 組織[統合先組織名]への統合リクエストを却下 |
| ![CSV](./images/CSVファイル.png) | ![情報](./images/information.png) 情報 | 組織統合の開始 <br/> ※統合先組織 | 組織[統合元組織名]から <br/> 組織[統合先組織名]への統合を開始 |
| ![CSV](./images/CSVファイル.png) | ![重要](./images/important.png) 重要 | 組織統合の完了 <br/> ※統合先組織 | 組織[統合元組織名]から <br/> 組織[統合先組織名]への統合を完了 |

### ユーザー操作

- データ種類は 「`ユーザー`」 固定となります。
- 組織管理者はすべての操作を参照可能で、一般ユーザーは自分自身の操作のみ参照可能です。
- CSV出力 ![CSV](./images/CSVファイル.png) はすべての操作が対象ですが、画面表示 ![画面](./images/画面表示.png) は一部の操作のみ対象となります。
- 操作が意図せず失敗した場合、ログ種類が「![エラー](./images/error.png) エラー」となります。

| 管理者 | 一般 | ログ種類 | 操作 | 内容 |
| :---: | :---: | :---: | --- | --- |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | 作成 | ユーザー[ログイン名]を作成 |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | 更新 | ユーザー[ログイン名]を更新 |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | 削除 | ユーザー[ログイン名]を削除 |
| ![CSV](./images/CSVファイル.png) | | ![重要](./images/important.png) 重要 | 無効化 | ユーザー[ログイン名]を無効化 |
| ![CSV](./images/CSVファイル.png) | | ![重要](./images/important.png) 重要 | 有効化 | ユーザー[ログイン名]を有効化 |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | 画像の更新 | ユーザー[ログイン名]の画像を更新 |
| ![CSV](./images/CSVファイル.png) | | ![重要](./images/important.png) 重要 | サービス区画の追加 | ユーザー[ログイン名]にサービス区画を追加 |
| ![CSV](./images/CSVファイル.png) | | ![重要](./images/important.png) 重要 | サービス区画の削除 | ユーザー[ログイン名]からサービス区画を削除 |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | ロールの割当 | ユーザー[ログイン名]にロールを割当 |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | ロールの解除 | ユーザー[ログイン名]からロールを解除 |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | インポート | ユーザーインポートを実行 |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | エクスポート | ユーザーエクスポートを実行 |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | バウンス確認 | バウンスメールアドレスを確認 |
| ![CSV](./images/CSVファイル.png) | | ![重要](./images/important.png) 重要 | 権限の付与 | ユーザー[ログイン名]に権限を付与 |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | 権限の取消 | ユーザー[ログイン名]の権限を取り消し |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | セッションのリセット | ユーザー[ログイン名]のセッションをリセット |
| ![CSV](./images/CSVファイル.png) ![画面](./images/画面表示.png) | ![画面](./images/画面表示.png) | ![重要](./images/important.png) 重要 | パスワードの変更 | 自身のパスワードを変更 |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | パスワード変更通知メールの送信 | パスワード変更通知メールを送信（自動） |
| ![CSV](./images/CSVファイル.png) | | ![重要](./images/important.png) 重要 | パスワードのリセット | ユーザー[ログイン名]のパスワードをリセット |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | パスワードリセットメールの送信 | ユーザー[ログイン名]へパスワードのリセットメールを送信 |
| ![CSV](./images/CSVファイル.png) ![画面](./images/画面表示.png) | ![画面](./images/画面表示.png) | ![重要](./images/important.png) 重要 | メールアドレスの変更 | 自身のメールアドレスを変更 |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | メールアドレス変更通知メールの送信 | メールアドレス変更通知メールを送信（自動） |
| ![CSV](./images/CSVファイル.png) | | ![重要](./images/important.png) 重要 | メールアドレスの変更 | ユーザー[ログイン名]のメールアドレスを変更 |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | メールアドレス変更メールの送信 | ユーザー[ログイン名]へメールアドレスの変更メールを送信 |
| ![CSV](./images/CSVファイル.png) ![画面](./images/画面表示.png) | ![画面](./images/画面表示.png) | ![重要](./images/important.png) 重要 | バックアップコードの発行 | 自身のバックアップコードを発行 |
| ![CSV](./images/CSVファイル.png) | | ![重要](./images/important.png) 重要 | バックアップコードのリセット | ユーザー[ログイン名]のバックアップコードをリセット |
| ![CSV](./images/CSVファイル.png) ![画面](./images/画面表示.png) | ![画面](./images/画面表示.png) | ![重要](./images/important.png) 重要 | パスキーの登録 | 自身のパスキーを登録 |
| ![CSV](./images/CSVファイル.png) | | ![重要](./images/important.png) 重要 | パスキーの削除 | 自身のパスキーを削除 |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | 招待メールの送信 | ユーザー[ログイン名]へ招待メールを送信 |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | メールアドレス確認メールの送信 | ユーザー[ログイン名]へメールアドレスの確認メールを送信 |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | メールアドレス確認通知メールの送信 | メールアドレス確認通知メールを送信（自動） |
| ![CSV](./images/CSVファイル.png) | | ![情報](./images/information.png) 情報 | ユーザー情報の同期 | ユーザー[ログイン名]の情報を同期 |

### 認証操作

- データ種類は 「`認証`」 固定となります。
- 組織管理者はすべての操作を参照可能で、一般ユーザーは自分自身の操作のみ参照可能です。
- すべての操作がCSV出力 ![CSV](./images/CSVファイル.png) および画面表示 ![画面](./images/画面表示.png) の対象となります。
- 操作が意図せず失敗した場合、ログ種類が「![エラー](./images/error.png) エラー」となります。

| 管理者 | 一般 | ログ種類 |  操作 | 内容 |
| :---: | :---: | :---: | --- | --- |
| ![CSV](./images/CSVファイル.png) ![画面](./images/画面表示.png) | ![画面](./images/画面表示.png) | ![情報](./images/information.png) 情報 |  ログイン | ログインに成功 |
| ![CSV](./images/CSVファイル.png) ![画面](./images/画面表示.png) | ![画面](./images/画面表示.png) | ![警告](./images/exclamation.png) 警告 |  ログイン失敗 | ログインに失敗 |
| ![CSV](./images/CSVファイル.png) ![画面](./images/画面表示.png) | ![画面](./images/画面表示.png) | ![情報](./images/information.png) 情報 |  ログアウト | ログアウトを実行 |
| ![CSV](./images/CSVファイル.png) ![画面](./images/画面表示.png) | ![画面](./images/画面表示.png) | ![情報](./images/information.png) 情報 | セッションの更新 | ユーザーセッションを自動更新 |
