---
sidebar_position: 16
---

# 16. 予約済みの組織

## 予約済みの組織名とは？

[組織名](./組織名.md)として、PCA ID が事前に確保し、ユーザー入力を禁止している名前のこと。  

PCA ID の組織名は、PCA Hub テナント名から自動的に決まるフローがある。  
このため、予約済みの名前を PCA Hub テナント名と揃えている（完全に同じではない）。

- PCA ID において、ユーザーは直接予約済みの組織名を使って組織を作成することはできない
  - PCA ID は予約済みの組織名を使ってランダムに名前を生成して組織を作成する
- PCA ID において、予約済みのテナント名を使った組織は作成できない
  - PCA Hub と仕様を揃えておく必要がある
  - 実際には揃えなくとも問題がないかもしれないが、将来の不都合を避けるため念のための措置とする
- PCA Hub において、予約済みの組織名を使ったテナントは作成できない
  - 組織名とテナント名の意図しない衝突を避けるため
- PCA Hub において、予約済みのテナント名を使ったテナントは作成できない

## 組織名の決定ケース

いずれのケースも、ユーザー予約を含む、利用中の組織名は使用不可となる（組織名の使用は先勝ち）

### 1. PCA Hub テナントの作成

- PCA Hub テナント名の予約と同時に、同じ名前で PCA ID 組織名も予約する
- 予約済み組織名の確認において、PCA ID 要件を含めることは必須とし、PCA Hub 要件を含めるかは、PCA Hub の判断に任せる
  - 現状（2024/12）、PCA Hub 要件を含めないようにしている

### 2. 新しい組織の作成

- 組織名は「org-」プレフィックでランダムに生成する
- PCA ID 要件による予約済み組織名の確認はスキップする
- PCA Hub テナント名との衝突は避ける必要があるので、テナント名として使えないようにする

### 3. 組織名の変更

- 予約済み組織名への変更を認めないように確認する

## 予約済みの組織名

### PCA ID 要件による、予約済み組織名

- PCA Hub から呼び出される、PCA ID 組織名の予約状態を確認する API がある
  - [組織予約状態 GET /organizations/organization_reservations/{organization_name}/status](/docs/api/organizations/organization_reservations/organization_name/status/GET%20組織予約状態.md)
- PCA Hub では認めているが、PCA ID では認めていない名前の場合、使用不可として応答する

| 名前 | 正規表現 | 備考 |
| --- | --- | --- |
| org- |  ^org-.* | `org-` で始まる名前で、以下のケースで自動設定する <br/> ・PCAクラウド/PCAサブスクからの組織作成 <br/> ・管理コンソールからの利用サービス追加 |
| tenant- |  ^tenant-.* | `tenant-` で始まる名前で、'org-' の代替候補として予約しておく <br/> PCA Hub テナント名で未使用ならこちらを採用する可能性あり |

### PCA Hub 要件による、禁止または予約済み組織名

- PCA Hub が予約済みのテナント名として定義したもので、予約済みの PCA ID 組織名としても扱う
- PCA Hub の要件として今後追加となる可能性があり、PCA ID ではコントロールできないため、設定として保持する
- [PCA Hub ドキュメント - テナントとサブドメイン](https://hub-docs.pca-dev.net/pcahub/%E5%85%A8%E8%88%AC/%E3%83%86%E3%83%8A%E3%83%B3%E3%83%88%E3%81%A8%E3%82%B5%E3%83%96%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3)

#### 基本的な名前

| 名前 | 正規表現 | 備考 |
| -- | -- | -- |
| pca | ^pca$ | 完全一致する場合にNG、部分一致はOK |
| pcaadmin | ^pcaadmin.* | pcaadmin で始まる名前 |
| pca-* | ^pca-.* | pca- で始まる名前 |
| www | ^www$ | 完全一致する場合にNG、部分一致はOK |
| www* | ^www.* | www で始まる名前 |
| admin | ^admin$ | 完全一致する場合にNG、部分一致はOK |
| administrator | ^administrator$ | 完全一致する場合にNG、部分一致はOK |
| admin-* | ^admin-.* | admin- で始まる名前 |
| system | ^system$ | 完全一致する場合にNG、部分一致はOK |

#### インターネットプロトコル、セキュリティ機能系

- www は予約済み  
- `root-key-sentinel-` 以外は完全一致したものを利用不可とする

| 名前 | 用途 | 備考 |
| -- | -- | -- |
| mail, pop | Eメールサーバーへのアクセスで利用 | |
| ftp       | FTPサーバーへのアクセスで利用 | |
| smtp      | SMTPサーバーへのアクセスで利用 | |
| imap      | IMAPサーバーへのアクセスで利用 | |
| mta-sts   | SMTP MTA-STSのポリシーを定義で利用 | |
| autodiscover | メールクライアントの自動設定検出に利用 | |
| openpgpkey | OpenPGP公開鍵の発見と配布に利用 | |
| root-key-sentinel-is-ta-(key-tag) | DNSSECのトラストアンカーとして認識されている場合に利用 <br/> （key-tagは任意のタグ） | 前方一致で判定 |
| root-key-sentinel-not-ta-(key-tag) | DNSSECのトラストアンカーとして認識されていない場合に利用 <br/> （key-tagは任意のタグ） | 前方一致で判定 |

#### PCAが使用する可能性のある名前

- いずれも完全一致したものを利用不可とする  

| 名前 | 用途 | 備考 |
| --- | --- | --- |
| blog       | ブログ用 | |
| shop <br/> store | オンラインストア用 | |
| forum      | コミュニティフォーラム用 | |
| support <br/> faq    | カスタマーサポート用 | |
| api        | API用 | |
| news       | ニュースリリース用 | |
| dev        | 開発者向けのリソース用 | |
| mobile     | モバイルデバイスに最適化されたウェブページやサービス用 | |
| beta       | ベータ版のサービスやテスト中の機能用 | |
| help       | ヘルプガイドやFAQセクション用 | |
| status     | サービスのステータスやシステムの稼働状況を報告するページ用 | |
| cdn        | コンテンツデリバリーネットワーク（CDN）のリソースへのアクセスポイントとして使用 | |
| video      | ビデオコンテンツ用 | |
| remote     | リモートアクセス用 | |
| service    | 管理アクセス用 | |
| jp <br/> en <br/> fr <br/> de | 多言語サイト用 | |
| img   | 画像用 | |
| login <br/> sign-in <br/> signin <br/> auth | ログインや認証用 | |

#### PCAの有力パートナー

- いずれも完全一致したものを利用不可とする  

| 名前 | 備考 |
|------------|--------------------------------------------------------------|
| ricoh | リコージャパン株式会社 [2022/05/30 利用終了](https://www4.ad.pca.co.jp/Kokyaku2/Contract/Detail/PcaHub/135) |
| canon | 未使用 |
| fujifilm | 富士フイルムビジネスイノベーションジャパン株式会社 [2023/10/31 利用終了](https://www4.ad.pca.co.jp/Kokyaku2/Contract/Detail/PcaHub/2811)|
| daiwabo | 未使用 |
| ikazuchi | 未使用 |
| softbank | 未使用 |
| fujitsu | 未使用 |
| synnex | 未使用 |
| konicaminolta | 未使用 |
| sharp | 未使用 |
| nec | 未使用 |
| ibm | 未使用 |
| dynabook | 未使用 |
