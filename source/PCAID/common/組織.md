---
sidebar_position: 12
---

# 12. 組織

## 組織とは

- アカウント（＝利用者＝従業員）が所属するグループ
- 組織に対して利用可能な[サービス区画](./サービス区画.md)を紐付ける
  - １つの組織が複数Hubテナントや複数クラウド区画と紐づくことがあり得る
- 一意な[組織名](./組織名.md)をもつ

## サービス同士のアカウント連携

- 紐付けたすべての[サービス区画](./サービス区画.md)で組織に所属するアカウントを共有する
- [サービス区画](./サービス区画.md)ごとに有効なアカウントを選択できる
  - 例：ABC(株)には、山田さん・佐藤さん、鈴木さんが所属している
    - この顧客は、PCA Hub と PCAクラウドを契約した
    - PCA Hub から３名をユーザー登録し、PCAクラウドから山田さんを参照してユーザー登録した
    - 佐藤さん、鈴木さんは PCA Hub のみ利用でき、山田さんはPCAクラウドも利用できる

## アクセス権限

- 組織管理者、およびサービス責任者がアクセス可能とする
  - 組織管理者とは
    - 組織に所属するユーザーを管理する
    - 組織における利用サービスを追加および削除する
    - サービス責任者の権限を管理する
    - サービスの利用状況を確認する
  - サービス責任者とは
    - サービス区画ごとの責任者で、利用サービスのユーザーを割り当てを管理する
    - 各サービスにおける以下の管理者へ権限を付与することを想定する
      - PCA Hubテナント管理者
      - PCAクラウド/PCAサブスク システム管理者（任意の製品）
- PCA ID 管理コンソールへの移動手段を用意する
  - PCA Hubテナント管理ページから
  - PCAクラウド/PCAサブスク システムツールから

## 組織属性項目

- 組織ID
  - Keycloak Group の内部IDで画面上には表示しない
- [組織名](./組織名.md)
- 組織表示名
  - 例：ピー・シー・エー株式会社、クロノス株式会社
- 組織画像
  - 初期値としては、PCA Hubテナント画像から登録する
- 顧客ID（外部管理）
  - PCAの顧客システムと紐付ける
- [サービス区画](./サービス区画.md)（一覧）
  - 利用可能なサービスを紐付ける
- 外部ID連携（要検討）

## 項目スペック一覧

| 項目名 | 必須 | 桁数 | 制限 | 備考 |
| --- | :---: | --- | --- | --- |
| [組織名](./組織名.md) | ◯ | 1～30文字 | 以下、使用可能 <br/>・半角英数（小文字のみ） <br/>・ハイフン「-」（中間位置のみ） | ・PCA ID全体で一意<br/>・再利用不可 |
| 組織表示名 | ◯ | 1～50文字 | 以下、使用不可 <br/>・改行文字 | ・重複可 |
| 組織画像 |  |  1MB未満 | ・.jpg (.jpeg) <br/>・.bmp <br/>・.png <br/>・.svg | |

### 関連情報

- [PCA Hub テナントスペック](https://pca1980.backlog.com/alias/wiki/772885#loom-header-5)

## Keycloak実装

Keycloak Group を以下のように構成する

> ① Group (組織)  
> ├ ② Group (PCA Hub テナント名)  
> ├ ③ Group (PCAクラウド 連携コード)  
> └ ④ Group (PCAサブスク 連携コード)  

PCAアカウント（ユーザー）とは、①を必須の割り当て（複数あり）、②③④をオプションの割り当て（いずれも複数あり）にする
